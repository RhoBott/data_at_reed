---
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
library(palmerpenguins)
library(tidyverse)
library(ggplot2)
library(knitr)
library(kableExtra)
library(waffle)
library(gt)
```

### Summary tables

#### kable and kableExtra

The [Summarizing data](https://www.reed.edu/data-at-reed/resources/R/summarizing-data.html) page shows how to compute summaries of your data. Summary tables can be useful for displaying data, and the `kable()` function in the R package `knitr` allows you to present tables with helpful formatting.

First, install and load the package.

```{r eval = FALSE}
install.packages("knitr")
library(knitr)
```

Using the `palmerpenguins` data, calculate the mean value of penguin body mass (g) across islands over time. (For more information on calculating summary statistics, see the [Data Wrangling](https://www.reed.edu/data-at-reed/resources/R/transforming-data-with-dplyr.html)) section.)  

Here is the code for our summary statistic, which we will save in a new dataset called `penguin_sum`.  

```{r message = FALSE}
penguin_sum <- penguins %>%
  group_by(island, year) %>%
  summarize(mean_body_mass_g = mean(body_mass_g, na.rm = TRUE)) %>% 
  ungroup()
```

You can print the dataset within R/RStudio:

```{r}
penguin_sum
```

To make a possibly more appealing table with the same data, use `kable()`:

```{r}
kable(x = penguin_sum, 
      format = "html",
      col.names = c("Island", "Year", "Mean Body Mass (g)"),
      caption = "Mean body mass of penguins on different islands over time")
```



For additional customization options, use the package `kableExtra`. 

```{r eval = FALSE}
install.packages("kableExtra")
library(kableExtra)
```

Start with very similar code to what you used with the basic `kable` table. Add the function `kable_styling()` to get the basic `kableExtra` format:

```{r}
kable(x = penguin_sum, 
      col.names = c("Island", "Year", "Mean Body Mass (g)"),
      caption = "Mean body mass of penguins on different islands over time") %>%
  kable_styling()
```

Some other options to consider as alternatives to `kable_styling()` are: `kable_classic()`, `kable_paper()`, `kable_classic_2()`,`kable_minimal()`, `kable_material()` and `kable_material_dark()`. 

To change the width of the table, add `full_width = FALSE` within your `kable_styling()` (or similar) argument. Additional options with `kableExtra` include changing the font:

```{r}
kable(x = penguin_sum, 
      col.names = c("Island", "Year", "Mean Body Mass (g)"),
      caption = "Mean body mass of penguins on different islands over time") %>%
   kable_classic(full_width = FALSE, html_font = "Cambria", font_size=16)
```

You can also adjust the font size: 
```{r}
kable(x = penguin_sum, 
      col.names = c("Island", "Year", "Mean Body Mass (g)"),
      caption = "Mean body mass of penguins on different islands over time") %>%
   kable_material_dark(html_font = "Cambria")
```

To learn more about these and other customizations, see [the kableExtra vignette](https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html#Overview).


#### gt

Another approach for creating tables is the `gt` package. `gt` stands for "grammar of tables," and feels a lot like working with `ggplot`'s grammar of graphics.

```{r}
install.packages("gt")
library(gt)
```

You can create a basic table just by adding `gt()` on to the end of your code:

```{r}
penguin_sum %>% 
  gt()
```

We can also adjust some of our column names and include a title by adding on to our baseline table. Notice that we can use the `md()` wrapper, which stands for "markdown," to use markdown styling in our tables; the `**` on either side will bold the `title` argument. One `*` on either side will italicize the text.

```{r}
penguin_sum %>% 
  gt() %>% 
  cols_label(
    mean_body_mass_g = "Mean Body Mass (g)"
    ) %>% 
  tab_header(
    title = md("**Mean body mass of penguins on different islands**"),
    subtitle = "2007-2009"
    ) 
```

Finally, we can do some grouping and then color our columns to help the viewer differentiate between the species. There are a couple of steps that need to be done before coloring our table.

First, we need to install a few new packages and then choose a palette from the huge collection of available ones. 

```{r}
install.packages("paletteer")
install.packages("scales")
```

You can run this line of code to look at all the color options:

```{r, eval = FALSE}
info_paletteer(color_pkgs = NULL)
```

The syntax is generally `packagename::palette` and you'll usually have to install the package before accessing the palette. Notice that we can specify how many colors we want with the `n = 3` argument.

```{r}
install.packages("ggsci")

palette <- paletteer::paletteer_d("ggsci::teal_material", n = 3) %>%
  as.character()
```

```{r}
penguin_sum %>% 
  gt() %>% 
  cols_label(
    mean_body_mass_g = "Mean Body Mass (g)"
    ) %>% 
  tab_header(
    title = md("**Mean body mass of penguins on different islands**"),
    subtitle = "2007-2009"
    ) %>% 
  data_color(
    columns = "island",
    colors = scales::col_factor(
      as.character(palette),
      domain = NULL
    )
  )
```


As with kable, there is a lot that you can do to customize your `gt` tables. We've only scratched the surface here, but there are a lot of great resources that go in depth on using the package---[the `gt` website](https://gt.rstudio.com/reference/index.html) is a good place to start.
